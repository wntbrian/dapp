---
title: Glossary
sidebar: reference
permalink: reference/glossary.html
---

### Dapp
Dapp — это проект, который:

* содержит код приложения или нескольких приложений;
* описывает правила сборки docker-образов для этих приложений;
* описывает правила развертывания docker-образов.

### dappfile
dappfile — файл описания правил сборки.

Правила поиска dappfile в [директории dapp](#директория-dapp):
- dappfile.yml
- dappfile.yaml
- Dappfile

### Директория dapp
Директория dapp — это директория, содержащая [dappfile](#dappfile).

### Имя dapp
Имя dapp — это последний элемент пути к git репозиторию из параметра конфигурации remote.origin.url или, при отсутствии git или параметра конфигурации remote.origin.url, это имя [директории dapp](#директория-dapp). Можно переопределить с помощью опции `--name`.

### Dimg
Dimg — это именованный набор правил для сборки одного образа. Также dimg или образ dimg — это сам образ, собранный по данным правилам.

### Артефакт
Артефакт (artifact) — это набор правил для сборки образа с [файловым ресурсом](#файловый-ресурс-артефакта), который импортируется в [dimg](#dimg) или в другой артефакт.

Также артефакт или образ артефакта — это сам образ, собранный по данным правилам.

Используется для изолирования процесса сборки и инструментов сборки (среды, программного обеспечение, данных) ресурсов от образов, использующих эти ресурсы.

В один [dimg](#dimg) или артефакт может быть добавлено произвольное количество артефактов.

#### Правила сборки

* Стадии артефакта:
  * from
  * before_install
  * before_install_artifact
  * git_artifact_archive
  * git_artifact_pre_install_patch
  * install
  * git_artifact_post_install_patch
  * after_install_artifact
  * before_setup
  * before_setup_artifact
  * git_artifact_pre_setup_patch
  * setup
  * after_setup_artifact
  * git_artifact_artifact_patch
  * build_artifact
* Могут использоваться такие же директивы, как у dimg, но с некоторыми особенностями:
  * Не используется директива [docker]({{ site.baseurl }}/reference/dappfile/docker_directive.html).
  * При использовании shell и ansible директив, а также в stageDependencies у директивы git, добавляется стадия build_artifact.


### Файловый ресурс артефакта

Файловый ресурс артефакта — это экспортируемая артефактом директория с произвольными файлами внутри образа артефакта.

* Каждый артефакт имеет один файловый ресурс, путь к которому указывается при его описании через параметр export.
* При отсутствии директории в образе — считается, что это пустая директория (при импорте такого артефакта будет создана пустая директория).

### Кэш приложения

Набор docker-образов, который определяется [стадиями приложения]({{ site.baseurl }}/reference/stages/stage.html).

### Тип сборщика

Тип сборщика — это способ указания инструкций по сборке образа пользователем dapp.

Dapp поддерживает 2 [типа сборщика](#тип-сборщика): shell сборщик] и ansible сборщик.

* В одном [dimg](#dimg) может быть использован один тип сборщика.
  * Соответственно существует 2 типа dimg: shell dimg и ansible dimg.
* Тип сборщика определяется автоматически при первом использовании соответствующей директивы в [dappfile](#dappfile).

### Shell dimg

Shell dimg — это проект, для сборки которого используются команды shell, заданные в [dappfile](#dappfile).

### Директория сборки dapp

Директория сборки dapp (build dir) — это директория для хранения кэша и производных данных сборки образов [dapp](#dapp).

* Используется для хранения:
  * Файлов блокировок проекта.
  * Remote git-репозиториев.
* Путь к build директории.
  * По умолчанию: `~/.dapp/builds/<[dapp name]>/(#имя-dapp)`.
  * Переопределяется параметром `--build-dir`.
* Необходимо указывать одну и ту же build директорию для каждой из вызываемых команд dapp (или использовать путь к директории по умолчанию).
* При указании build директории необходимо иметь в виду, что для каждого [проекта](#проект) нужна отдельная директория.
* Одна и та же build директория используется всеми [приложениями](#приложение), описанными в данном [проекте](#проект).

### Временная директория приложения

Временная директория приложения (tmp dir) — это временная рабочая директория сборщика [приложения](#приложение).

* Создается для каждого [приложения](#приложение) во время сборки.
* Используется для хранения:
  * ansible playbook'ов
  * Артефактов.
* Путь к директории: /tmp/dapp-\<date\>-\<random\>.
* Удаление директории происходит автоматически при ожидаемом успешном или неуспешном завершении работы dapp.

### Режим разработки

* Включается опцией командной строки `--dev`.
* Используется для:
  * включения создания файла Berksfile.lock в случае его отсутствия (см. [cookbook приложения]({{ site.baseurl }}/ruby/chef.html#cookbook-dapp)).

### Блокировка ресурса

Блокировки обеспечивают корректную работу команд dapp при их параллельном запуске в рамках одного проекта на одном сервере.

* Блокировки реализованы с использованием механизма файловых блокировок ОС.
* Файлы блокировок хранятся в директории \<[build dir](#директория-сборки)\>/locks.

Для управления таймаутом ожидания блокировки в некоторых командах используется параметр `--lock-timeout TIMEOUT`.

### Внешняя директория сборки

Директория, которая монтируется в docker-контейнеры в процессе сборки [приложения](#приложение).

* Используется для уменьшения размера [кэша приложения](#кэш-приложения) и конечного образа приложения соответственно.
* Ожидается директория с данными порождаемыми в процессе сборки, которые:
  * не требуются конечному пользователю;
  * занимают значительный размер.
* Для добавления используются директива [mount]({{ site.baseurl }}/reference/dappfile/mount_directive.html). Поддерживается несколько типов, которые различаются только местом размещения внешней директории.
